<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wavelength Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: "Roboto", sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            background-image: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .game-container {
            text-align: center;
            background-color: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            width: 600px;
            height: 630px;
        }

        .title {
            font-family: "Orbitron", sans-serif;
            font-size: 48px;
            font-weight: 700;
            color: #3742fa;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            letter-spacing: 2px;
        }

        .how-to-play {
            margin-top: 20px;
            letter-spacing: 2px;
            background-color: #a4b0be;
        }

        .subtitle {
            font-size: 24px;
            color: #2f3542;
            margin-bottom: 30px;
        }

        .board {
            width: 400px;
            height: 200px;
            background-color: #e0e0e0;
            border-radius: 200px 200px 0 0;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 5px 10px rgba(0, 0, 0, 0.1);
            margin: 0 auto;
        }

        .target-area {
            width: 400px;
            height: 200px;
            border-radius: 200px 200px 0 0;
            position: absolute;
            overflow: hidden;
        }

        .needle-container {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 40px;
            height: 180px;
            transform: translateX(-50%);
            cursor: pointer;
        }

        .needle {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 4px;
            height: 200px;
            background-color: #ff4757;
            transform-origin: bottom center;
            transition: transform 0.2s ease;
        }

        .clues-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
            height: 60px;
        }

        .clue {
            flex: 1;
            font-size: 18px;
            font-weight: bold;
            color: #2f3542;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            padding: 0 10px;
        }

        .bidirectional-arrow {
            width: 100px;
            height: 2px;
            background-color: #3742fa;
            position: relative;
            margin: 0 20px;
            flex-shrink: 0;
        }

        .bidirectional-arrow::before,
        .bidirectional-arrow::after {
            content: "";
            position: absolute;
            top: 50%;
            width: 10px;
            height: 10px;
            border-top: 2px solid #3742fa;
            border-right: 2px solid #3742fa;
        }

        .bidirectional-arrow::before {
            left: 0;
            transform: translateY(-50%) rotate(-135deg);
        }

        .bidirectional-arrow::after {
            right: 0;
            transform: translateY(-50%) rotate(45deg);
        }

        .controls {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        button {
            font-size: 16px;
            padding: 10px 20px;
            cursor: pointer;
            background-color: #5352ed;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
            flex: 1 0 auto;
            max-width: 150px;
        }

        button:hover {
            background-color: #3742fa;
        }

        #score,
        #totalScore {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
            color: #2f3542;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .team-setup {
            background-color: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: 2rem auto;
            text-align: center;
        }

        .team-count {
            margin-bottom: 1rem;
        }

        .team-name-input {
            margin-bottom: 0.5rem;
        }

        .current-team {
            font-weight: bold;
            color: #3742fa;
        }

        .modal-content {
            background-color: #ffffff;
            margin: 10% auto;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            border-radius: 15px;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
            transform: translateY(-50px);
            opacity: 0;
            transition: all 0.3s ease-out;
        }

        .modal.show .modal-content {
            transform: translateY(0);
            opacity: 1;
        }

        .close-button {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: #3742fa;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <div id="howToPlayModal" class="modal">
        <div class="modal-content">
            <h2>How to Play Wavelength</h2>
            <div class="modal-body">
                <ol>
                    <li>A pair of opposing concepts will be displayed.</li>
                    <li>The Psychic gives a clue where the target is located ON THE SPECTRUM between the two concepts</li>
                    <li>The Psychic's team decides where to turn the dial.</li>
                    <li>Click and drag the needle to set your guess.</li>
                    <li>Click "Hide Target" to lock in your guess.</li>
                    <li>Click "Reveal Target" to see how close you were.</li>
                </ol>
            </div>
            <button class="close-button">Got it!</button>
        </div>
    </div>

    <div id="teamSetup" class="team-setup">
        <h1 class="title">Wavelength</h1>
        <h2>Team Setup</h2>
        <div class="team-count">
            <label for="teamCount">Number of Teams (1-5):</label>
            <input type="number" id="teamCount" min="1" max="5" value="2">
        </div>
        <div id="teamNames"></div>
        <button id="startGame">Start Game</button>
        <button id="howToPlayButton" class="how-to-play">How to Play</button>
    </div>

    <div class="game-container">
        <h1 class="title">Wavelength</h1>
        <div class="board">
            <div class="target-area" id="targetArea"></div>
            <div class="needle-container" id="needleContainer">
                <div class="needle" id="needle"></div>
            </div>
        </div>
        <div class="clues-container">
            <div class="clue" id="leftClue"></div>
            <div class="bidirectional-arrow"></div>
            <div class="clue" id="rightClue"></div>
        </div>
        <div class="controls">
            <button id="toggleButton">Hide Target</button>
            <button id="nextRoundButton">Next Round</button>
            <button id="newGameButton" style="background-color: red; color: white">New Game</button>
        </div>
        <div id="score"></div>
        <div id="totalScore">Total Score: 0</div>
    </div>

    <script>
        const needleContainer = document.getElementById("needleContainer");
        const needle = document.getElementById("needle");
        const targetArea = document.getElementById("targetArea");
        const toggleButton = document.getElementById("toggleButton");
        const nextRoundButton = document.getElementById("nextRoundButton");
        const newGameButton = document.getElementById("newGameButton");
        const scoreElement = document.getElementById("score");
        const totalScoreElement = document.getElementById("totalScore");
        const teamSetup = document.getElementById('teamSetup');
        const teamCount = document.getElementById('teamCount');
        const teamNames = document.getElementById('teamNames');
        const startGameButton = document.getElementById('startGame');
        const gameContainer = document.querySelector('.game-container');

        let isDragging = false;
        let targetAngle = 0;
        let isTargetVisible = true;
        let canMoveNeedle = false;
        let teams = [];
        let currentTeamIndex = 0;

        const clues = [
            ["Mala compañía", "Buena compañía"], ["Película terrible", "Gran película"], ["Persona olvidable", "Persona memorable"],
            ["Culturalmente insignificante", "Culturalmente significativo"], ["Comida seca", "Comida húmeda"], ["Fácil de hacer", "Difícil de hacer"],
            ["Se siente mal", "Se siente bien"], ["Sin pelo", "Peludo"], ["Difícil de recordar", "Fácil de recordar"],
            ["Frío", "Caliente"], ["Inflexible", "Flexible"], ["Comida limpia", "Comida pringosa"],
            ["Comida para comer con cubiertos", "Comida para comer con las manos"], ["Deseo", "Necesidad"], ["Cosa rara de tener", "Cosa normal de tener"],
            ["Mal fabricado", "Bien fabricado"], ["Lugar silencioso", "Lugar ruidoso"], ["Común", "Raro"],
            ["Mala influencia", "Modelo a seguir"], ["Animal puntiagudo", "Animal redondo"], ["Duro", "Blando"],
            ["Feo", "Precioso"], ["Trabajo mal pagado", "Trabajo sobrepagado"], ["Habilidad infravalorada", "Habilidad sobrevalorada"],
            ["Emoji nada sexy", "Emoji sexy"], ["Inútil", "Útil"], ["Villano", "Héroe"], ["El peor día de tu vida", "El mejor día de tu vida"],
            ["Hobby aburrido", "Hobby emocionante"], ["Superpoder inútil", "Superpoder increíble"], ["Truco de fiesta cutre", "Truco de fiesta genial"],
            ["Lugar terrible para una primera cita", "Lugar perfecto para una primera cita"], ["Tema de conversación incómodo", "Tema de conversación interesante"],
            ["El peor ingrediente para una pizza", "El mejor ingrediente para una pizza"], ["Sonido molesto", "Sonido satisfactorio"],
            ["Ropa incómoda", "Ropa cómoda"], ["El peor olor", "El mejor olor"], ["Asignatura aburrida", "Asignatura fascinante"],
            ["Regalo terrible", "Regalo detallista"], ["Hábito poco saludable", "Hábito saludable"], ["La peor tarea del hogar", "La tarea más satisfactoria"],
            ["Canción olvidable", "Canción pegadiza"], ["App inútil", "App imprescindible"], ["Nombre de supervillano cutre", "Nombre de superhéroe increíble"],
            ["Peor sabor", "Mejor sabor"], ["Exposición aburrida", "Exposición alucinante"], ["Nombre de banda terrible", "Nombre de banda increíble"],
            ["Peor frase de anuario", "Mejor frase de anuario"], ["Excusa cutre", "Excusa creíble"], ["Mascota de equipo terrible", "Mascota de equipo adorable"],
            ["Peor invento", "Invento que cambia la vida"], ["Anuncio molesto", "Anuncio memorable"], ["Peor frase para ligar", "Frase para ligar infalible"],
            ["Peor relleno para un sándwich", "Mejor relleno para un sándwich"], ["Salvapantallas aburrido", "Salvapantallas hipnótico"],
            ["Truco de vida inútil", "Truco de vida revolucionario"], ["Peor premisa de serie", "Premisa de serie desternillante"],
            ["Peor canción de karaoke", "Canción de karaoke que anima a todos"], ["Tendencia de redes molesta", "Tendencia de redes divertida"],
            ["Nombre artístico terrible", "Nombre artístico inolvidable"], ["Peor trabalenguas", "Trabalenguas más desafiante"],
            ["Tatuaje horrible", "Tatuaje con significado"], ["Pegatina de coche molesta", "Pegatina de coche ingeniosa"],
            ["Frase gancho molesta", "Frase gancho icónica"], ["Nombre de equipo terrible", "Nombre de equipo intimidante"],
            ["Peor combinación de sabores", "Combinación de sabores deliciosamente inesperada"], ["Carrera universitaria inútil", "Carrera que te cambia la vida"],
            ["Tema de podcast terrible", "Podcast para maratonear"], ["Peor atracción de feria", "Atracción de feria emocionante"],
            ["Truco de mascota molesto", "Truco de mascota impresionante"], ["Entrenamiento terrible", "Entrenamiento efectivo"],
            ["Peor juego de mesa", "Juego de mesa adictivo"], ["Hábito molesto", "Rasgo adorable"], ["Broma pesada de mal gusto", "Broma inofensiva"],
            ["Peor mascota de cereales", "Mascota de cereales querida"], ["Sonido de alarma molesto", "Alarma para despertar con suavidad"],
            ["Lugar de vacaciones terrible", "Destino de vacaciones soñado"], ["Juguete peor", "Juguete que todos quieren"],
            ["Personaje de TV molesto", "Personaje de TV favorito de los fans"], ["Efecto secundario de superpoder terrible", "Ventaja de superpoder increíble"],
            ["Peor sabor de helado", "Sabor de helado innovador"], ["Abreviatura de texto molesta", "Abreviatura de texto útil"],
            ["Idea de disfraz terrible", "Idea de disfraz creativa"], ["Peor error de cocina", "Truco de cocina revolucionario"],
            ["Ejercicio molesto", "Ejercicio divertido"], ["Peor método de ruptura", "Método de ruptura respetuoso"],
            ["Peor póster motivacional", "Póster que realmente motiva"], ["Función del coche molesta", "Función del coche útil"],
            ["Peor escondite", "Escondite ingenioso"], ["Peor tendencia de la era de tus padres", "Tendencia retro genial"],
            ["Comportamiento de turista molesto", "Comportamiento de turista respetuoso"], ["Peor hábito de compañero de piso", "Cualidad de compañero de piso ideal"],
            ["Peor excusa para faltar al trabajo", "Razón legítima para faltar al trabajo"], ["Notificación de móvil molesta", "Notificación de móvil importante"],
            ["Nombre de barco terrible", "Nombre de barco ingenioso"], ["Peor razón para romper", "Razón válida para romper"],
            ["Comportamiento en el gimnasio molesto", "Etiqueta de gimnasio adecuada"], ["Aerolínea terrible", "Aerolínea de primer nivel"],
            ["Peor graffiti de baño", "Graffiti de baño profundo"], ["Comportamiento en concierto molesto", "Comportamiento en concierto considerado"],
            ["Peor casa de Hogwarts", "Mejor casa de Hogwarts"], ["Peor razón para tener mascota", "Gran razón para tener mascota"],
            ["Asunto de email molesto", "Asunto de email que llama la atención"], ["Nombre de red WiFi terrible", "Nombre de red WiFi ingenioso"]
        ];

        function updateTeamInputs() {
            const count = parseInt(teamCount.value);
            teamNames.innerHTML = '';
            for (let i = 0; i < count; i++) {
                const input = document.createElement('input');
                input.type = 'text';
                input.placeholder = `Team ${i + 1} Name`;
                input.className = 'team-name-input';
                teamNames.appendChild(input);
            }
        }

        teamCount.addEventListener('change', updateTeamInputs);
        updateTeamInputs();

        startGameButton.addEventListener('click', () => {
            teams = Array.from(teamNames.children).map(input => ({
                name: input.value || input.placeholder,
                score: 0
            }));
            teamSetup.style.display = 'none';
            gameContainer.style.display = 'block';
            updateScoreDisplay();
        });

        function updateScoreDisplay() {
            totalScoreElement.innerHTML = teams.map((team, index) =>
                `<div class="${index === currentTeamIndex ? 'current-team' : ''}">${team.name}: ${team.score}</div>`
            ).join('');
        }

        function setTargetArea() {
            targetAngle = Math.random() * 180 - 90;
            targetArea.style.background = `conic-gradient(from -90deg at 50% 100%, #a4b0be 0deg ${targetAngle - 22.5 + 90}deg, #ff6b6b ${targetAngle - 22.5 + 90}deg ${targetAngle - 13.5 + 90}deg, #feca57 ${targetAngle - 13.5 + 90}deg ${targetAngle - 4.5 + 90}deg, #48dbfb ${targetAngle - 4.5 + 90}deg ${targetAngle + 4.5 + 90}deg, #feca57 ${targetAngle + 4.5 + 90}deg ${targetAngle + 13.5 + 90}deg, #ff6b6b ${targetAngle + 13.5 + 90}deg ${targetAngle + 22.5 + 90}deg, #a4b0be ${targetAngle + 22.5 + 90}deg 180deg)`;
        }

        function setRandomClues() {
            const [left, right] = clues[Math.floor(Math.random() * clues.length)];
            document.getElementById("leftClue").textContent = left;
            document.getElementById("rightClue").textContent = right;
        }

        function handleMove(e) {
            if (!isDragging || !canMoveNeedle) return;
            const rect = needleContainer.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            const angle = (Math.atan2(clientX - (rect.left + rect.width / 2), rect.bottom - clientY) * 180) / Math.PI;
            needle.style.transform = `rotate(${Math.max(-90, Math.min(90, angle))}deg)`;
        }

        needleContainer.addEventListener("mousedown", () => { if(canMoveNeedle) isDragging = true; });
        document.addEventListener("mousemove", handleMove);
        document.addEventListener("mouseup", () => isDragging = false);

        toggleButton.addEventListener("click", () => {
            isTargetVisible = !isTargetVisible;
            targetArea.style.display = isTargetVisible ? "block" : "none";
            if (!isTargetVisible) {
                toggleButton.textContent = "Reveal Target";
                canMoveNeedle = true;
                needle.style.display = "block";
            } else {
                toggleButton.style.display = "none";
                const angle = parseFloat(needle.style.transform.replace("rotate(", "")) || 0;
                const diff = Math.abs(angle - targetAngle);
                let points = diff <= 4.5 ? 5 : diff <= 13.5 ? 3 : diff <= 22.5 ? 1 : 0;
                teams[currentTeamIndex].score += points;
                scoreElement.textContent = `${teams[currentTeamIndex].name} scored: ${points} points`;
                if(points === 5) confetti({particleCount: 150, spread: 70, origin: {y: 0.6}});
                updateScoreDisplay();
                canMoveNeedle = false;
            }
        });

        nextRoundButton.addEventListener("click", () => {
            setTargetArea(); setRandomClues();
            isTargetVisible = true; targetArea.style.display = "block";
            toggleButton.textContent = "Hide Target"; toggleButton.style.display = "inline-block";
            needle.style.transform = "rotate(0deg)"; needle.style.display = "none";
            scoreElement.textContent = "";
            currentTeamIndex = (currentTeamIndex + 1) % teams.length;
            updateScoreDisplay();
        });

        // Initialize
        setTargetArea(); setRandomClues(); needle.style.display = "none";
    </script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
</body>
</html>
